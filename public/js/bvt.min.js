function BVTDialog() {
	var ref = this;

	this.instance = null;

	this.content = '';
	this.buttons = [];
	
	this.config = {};
	this.config.title = '';
	this.config.modal = true;
	this.config.resizable = false;
	this.config.visible = false;
	this.config.width = '30%';

	this.config.open = function(e) { 
		var _dialog = e.sender;
		_dialog.setOptions({ 
			title: ref.config.title, 
			width: ref.config.width
		});
		_dialog.element.find('.dialog-content').append(ref.content);

		var buttons = _dialog.element.find('.dialog-buttons');
		for(i in ref.buttons) {
			var button = ref.buttons[i];
			buttons.append($('<button id="'+button.id+'" class="k-button '+(button.primary ? 'k-primary' : null)+' pull-right">'+button.label+'</button>'));
		}
	}	

	var dialogElement = $('<div/>');
	dialogElement.append($('<div class="dialog-content"/>'));
	dialogElement.append($('<br>'));
	dialogElement.append($('<div class="dialog-buttons"/>'));

	var dialog = dialogElement.kendoWindow(this.config).data('kendoWindow');
	this.instance = dialog;
}
function BVTGrid() {
	var ref = this;

	this.target = null;
	this.object = null;

	this.dataBoundExtension = function(e) { }

	this.config = {};
	this.config.filterable = {
		mode: 'row'
	};
	this.config.mobile = true;
	this.config.pageable = true;
	this.config.sortable = true;

	this.config.dataBound = function(e) {
		ref.dataBoundExtension(e);

		var grid = e.sender;
		$('.grid-delete-button', grid.element).click(function() {
			var deleteURL = $(this).prop('href');
			var row = $(this).closest('tr');			
			
			var dialog = new BVTDialog();
			dialog.config.title = '<i class="fa fa-lg fa-trash"></i> Delete Product';
			dialog.content = '<p>Are you sure delete this product?</p>';
			dialog.buttons = [
				{ id: 'ok-btn', label: 'Ok', primary: true },
				{ id: 'cancel-btn', label: 'Cancel' }
			];
			
			dialog.instance.center().open().pin();

			dialog.instance.element.find('#ok-btn').click(function() {
				$.post(deleteURL, { _token: $('body').find('input[name="_token"]').val(), _method: 'delete' }, function() {
					grid.removeRow(row);
					dialog.instance.close();
				});						
			});

			dialog.instance.element.find('#cancel-btn').click(function() {
				dialog.instance.close();
			});			

			return false;			
		});
	}

	this.create = function() {
		this.object = this.target.kendoGrid(this.config).data('kendoGrid');
	}
}